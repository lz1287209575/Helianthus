# Enable Bzlmod (required for Bazel 8+)
common --enable_bzlmod

# Disable legacy WORKSPACE (required for Bazel 8+)
common --noenable_workspace

build:linux --repo_env=CC=gcc
build:linux --repo_env=CXX=g++
build:linux --repo_env=BAZEL_COPTS=-std=c11

build:msvc --cxxopt=/std:c++20
build:msvc --cxxopt=/utf-8
build:msvc --host_cxxopt=/utf-8

# 确保Linux使用正确的编译器选项
build:linux --cxxopt=-std=c++20
build:linux --host_cxxopt=-std=c++20