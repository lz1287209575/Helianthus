cc_test(
    name = "message_test",
    srcs = ["MessageTest.cpp"],
    copts = select({
        "@bazel_tools//src/conditions:windows": ["/std:c++20"],
        "//conditions:default": ["-std=c++17"],
    }),
    deps = [
        "//Shared/Message:message",
        "@googletest//:gtest_main",
    ],
)

cc_test(
    name = "message_queue_test", 
    srcs = ["MessageQueueTest.cpp"],
    copts = select({
        "@bazel_tools//src/conditions:windows": ["/std:c++20"],
        "//conditions:default": ["-std=c++20"],
    }),
    deps = [
        "//Shared/Message:message",
        "@googletest//:gtest_main",
    ],
)

cc_test(
    name = "message_comprehensive_test",
    srcs = ["MessageComprehensiveTest.cpp"],
    copts = select({
        "@bazel_tools//src/conditions:windows": ["/std:c++20"],
        "//conditions:default": ["-std=c++20"],
    }),
    deps = [
        "//Shared/Message:message",
        "//Shared/Common:common",
        "@googletest//:gtest_main",
    ],
)

cc_test(
    name = "message_queue_comprehensive_test",
    srcs = ["MessageQueueComprehensiveTest.cpp"],
    copts = select({
        "@bazel_tools//src/conditions:windows": ["/std:c++20"],
        "//conditions:default": ["-std=c++17"],
    }),
    deps = [
        "//Shared/MessageQueue:message_queue",
        "@googletest//:gtest_main",
    ],
    timeout = "long",
)

cc_test(
    name = "message_queue_boundary_test",
    srcs = ["MessageQueueBoundaryTest.cpp"],
    copts = select({
        "@bazel_tools//src/conditions:windows": ["/std:c++20"],
        "//conditions:default": ["-std=c++17"],
    }),
    deps = [
        "//Shared/MessageQueue:message_queue",
        "@googletest//:gtest_main",
    ],
    timeout = "long",
)

cc_test(
    name = "message_queue_memory_test",
    srcs = ["MessageQueueMemoryTest.cpp"],
    copts = select({
        "@bazel_tools//src/conditions:windows": ["/std:c++20"],
        "//conditions:default": ["-std=c++17"],
    }),
    deps = [
        "//Shared/MessageQueue:message_queue",
        "@googletest//:gtest_main",
    ],
    timeout = "long",
)

cc_test(
    name = "transaction_test",
    srcs = ["TransactionTest.cpp"],
    copts = select({
        "@bazel_tools//src/conditions:windows": ["/std:c++20"],
        "//conditions:default": ["-std=c++20"],
    }),
    deps = [
        "//Shared/MessageQueue:message_queue",
        "@googletest//:gtest_main",
    ],
)

cc_test(
    name = "message_queue_compression_test",
    srcs = ["MessageQueueCompressionTest.cpp"],
    copts = select({
        "@bazel_tools//src/conditions:windows": ["/std:c++20"],
        "//conditions:default": ["-std=c++20"],
    }),
    deps = [
        "//Shared/MessageQueue:message_queue",
        "@googletest//:gtest_main",
    ],
)

cc_test(
    name = "message_queue_batching_test",
    srcs = ["MessageQueueBatchingTest.cpp"],
    copts = select({
        "@bazel_tools//src/conditions:windows": ["/std:c++20"],
        "//conditions:default": ["-std=c++20"],
    }),
    deps = [
        "//Shared/MessageQueue:message_queue",
        "@googletest//:gtest_main",
    ],
)

cc_test(
    name = "prometheus_tx_metrics_test",
    srcs = ["PrometheusTransactionMetricsTest.cpp"],
    copts = select({
        "@bazel_tools//src/conditions:windows": ["/std:c++20"],
        "//conditions:default": ["-std=c++20"],
    }),
    deps = [
        "//Shared/MessageQueue:message_queue",
        "//Shared/Monitoring:monitoring",
        "@googletest//:gtest_main",
    ],
)

cc_test(
    name = "prometheus_tx_metrics_extended_test",
    srcs = ["PrometheusTransactionMetricsExtendedTest.cpp"],
    copts = select({
        "@bazel_tools//src/conditions:windows": ["/std:c++20"],
        "//conditions:default": ["-std=c++20"],
    }),
    deps = [
        "//Shared/MessageQueue:message_queue",
        "//Shared/Monitoring:monitoring",
        "@googletest//:gtest_main",
    ],
)

cc_test(
    name = "prometheus_perf_new_metrics_test",
    srcs = ["PrometheusPerfNewMetricsTest.cpp"],
    copts = select({
        "@bazel_tools//src/conditions:windows": ["/std:c++20"],
        "//conditions:default": ["-std=c++20"],
    }),
    deps = [
        "//Shared/MessageQueue:message_queue",
        "@googletest//:gtest_main",
    ],
)

cc_test(
    name = "prometheus_http_e2e_test",
    srcs = ["PrometheusHttpE2eTest.cpp"],
    copts = select({
        "@bazel_tools//src/conditions:windows": ["/std:c++20"],
        "//conditions:default": ["-std=c++20"],
    }),
    deps = [
        "//Shared/MessageQueue:message_queue",
        "//Shared/Monitoring:monitoring",
        "//Shared/Network:network",
        "@googletest//:gtest_main",
    ],
)

cc_test(
    name = "simple_transaction_test",
    srcs = ["SimpleTransactionTest.cpp"],
    copts = select({
        "@bazel_tools//src/conditions:windows": ["/std:c++20"],
        "//conditions:default": ["-std=c++20"],
    }),
    deps = [
        "//Shared/MessageQueue:message_queue",
        "@googletest//:gtest_main",
    ],
)

cc_test(
    name = "performance_benchmark_test",
    srcs = ["PerformanceBenchmarkTest.cpp"],
    copts = select({
        "@bazel_tools//src/conditions:windows": ["/std:c++20"],
        "//conditions:default": ["-std=c++20"],
    }),
    deps = [
        "//Shared/MessageQueue:message_queue",
        "@googletest//:gtest_main",
    ],
    timeout = "long",  # 性能测试可能需要较长时间
)

cc_test(
    name = "distributed_transaction_test",
    srcs = ["DistributedTransactionTest.cpp"],
    copts = select({
        "@bazel_tools//src/conditions:windows": ["/std:c++20"],
        "//conditions:default": ["-std=c++20"],
    }),
    deps = [
        "//Shared/MessageQueue:message_queue",
        "@googletest//:gtest_main",
    ],
)